# HS3 USB Protocol - Refer√™ncia de Opcodes

**Vers√£o**: 1.0
**Data**: 20 de outubro de 2025
**Baseado em**: API Monitor logs e an√°lise de sequ√™ncia IOCTL
**Atualizado por**: Agente de Codifica√ß√£o - Implementa√ß√£o da camada de protocolo USB

---

## üìã Resumo

Este documento lista todos os opcodes do protocolo USB do TiePie Handyscope HS3, descobertos via an√°lise de tr√°fego USB do API Monitor. Os opcodes s√£o enviados atrav√©s de IOCTL 0x22204E (WRITE_OPERATION) e respostas s√£o lidas via IOCTL 0x222051 (READ_OPERATION).

---

## üîó Estrutura de Comunica√ß√£o

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Ciclo de Comunica√ß√£o HS3                                    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ 1. READ_OPERATION (IOCTL 0x222051)                          ‚îÇ
‚îÇ    - Input: 4 bytes (comando anterior, ou 0x00 no in√≠cio)  ‚îÇ
‚îÇ    - Output: 8 bytes (resposta/status)                      ‚îÇ
‚îÇ    - Timeout: ~2.5ms (limite USB 64 bytes)                 ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ 2. WRITE_OPERATION (IOCTL 0x22204E)                        ‚îÇ
‚îÇ    - Input: 4 bytes (OpCode + 3 bytes par√¢metro)            ‚îÇ
‚îÇ    - Output: 8 bytes (confirma√ß√£o)                          ‚îÇ
‚îÇ    - Timeout: ~2.5ms                                        ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ Padr√£o: READ sempre antes de WRITE (33 ciclos observados)  ‚îÇ
‚îÇ Thread-safety: Single-threaded, lock(_deviceLock) obrigat√≥rio
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìä Tabela de Opcodes

### Opcodes de Controle (0x40-0x45)

| OpCode | Nome | Input Format | Output Format | Descri√ß√£o | Timing | Exemplo |
|--------|------|---------|---------|-----------|---------|---------|
| **0x40** | SET_FREQUENCY | 4 bytes: [0x40, Freq_L, Freq_M, Freq_H] | 8 bytes: Status | Configura frequ√™ncia da emiss√£o (1Hz - 1MHz) | 2.5ms | `0x40 0x64 0x00 0x00` = 100 Hz |
| **0x41** | SET_AMPLITUDE | 4 bytes: [0x41, Amp_0-255, 0x00, 0x00] | 8 bytes: Status | Configura amplitude (0-100% ou 0-10V) | 2.5ms | `0x41 0x7F 0x00 0x00` = ~50% |
| **0x42** | START_EMISSION | 4 bytes: [0x42, 0x00, 0x00, 0x00] | 8 bytes: Status | Inicia emiss√£o com configura√ß√µes atuais | 2.5ms | `0x42 0x00 0x00 0x00` |
| **0x43** | STOP_EMISSION | 4 bytes: [0x43, 0x00, 0x00, 0x00] | 8 bytes: Status | Para emiss√£o em curso | 2.5ms | `0x43 0x00 0x00 0x00` |
| **0x44** | SET_WAVEFORM | 4 bytes: [0x44, Wave, 0x00, 0x00] | 8 bytes: Status | Configura forma de onda | 2.5ms | `0x44 0x00 0x00 0x00` = Sine |
| **0x45** | SET_DURATION | 4 bytes: [0x45, Dur_sec, 0x00, 0x00] | 8 bytes: Status | Configura dura√ß√£o (0-255 seg, 0=cont√≠nuo) | 2.5ms | `0x45 0x1E 0x00 0x00` = 30 seg |

### Opcodes de Diagn√≥stico (0x03-0x05)

| OpCode | Nome | Input Format | Output Format | Descri√ß√£o | Timing | Exemplo |
|--------|------|---------|---------|-----------|---------|---------|
| **0x03** | GET_STATUS | 4 bytes: [0x03, 0x00, 0x00, 0x00] | 8 bytes: [Status_Flags, ...] | Query status do dispositivo | 2.5ms | L√™ flags: Emitting, Error, Ready |
| **0x04** | GET_VERSION | 4 bytes: [0x04, 0x00, 0x00, 0x00] | 8 bytes: [Major, Minor, Patch, ...] | Query vers√£o firmware | 2.5ms | Retorna: [1, 2, 3, ...] |
| **0x05** | GET_ERROR | 4 bytes: [0x05, 0x00, 0x00, 0x00] | 8 bytes: [ErrorCode, ...] | Query c√≥digo de erro | 2.5ms | 0x00 = sem erro |

---

## üìù Detalhes de Cada Opcode

### OpCode 0x40: SET_FREQUENCY

**Prop√≥sito**: Configurar a frequ√™ncia de emiss√£o

**Formato do Comando**:
```
Byte 0: 0x40 (OpCode)
Byte 1: Frequ√™ncia (byte baixo)    - LSB
Byte 2: Frequ√™ncia (byte m√©dio)    - Middle
Byte 3: Frequ√™ncia (byte alto)     - MSB (se suportada precis√£o)
```

**Encoding**: Little-endian de 24 bits (uint24)
- Frequ√™ncia 100 Hz: `0x64 0x00 0x00`
- Frequ√™ncia 1000 Hz: `0xE8 0x03 0x00`
- Frequ√™ncia 432 Hz: `0xB0 0x01 0x00`

**Resposta**: 8 bytes com confirma√ß√£o
- Byte 0: Flags (Bit 0: sucesso/erro)
- Bytes 1-7: Dados adicionais ou confirma√ß√£o de eco

**Valida√ß√£o**:
- Range: 1 Hz a 1 MHz (0x000001 a 0x0F4240 em hex)
- Rejeita: 0 Hz, valores > 1 MHz

**Timeout**: 2.5ms (padr√£o USB bulk)

**Exemplo em C#**:
```csharp
var cmd = HS3CommandPresets.SetFrequency(100.0);
// Resultado: [0x40, 0x64, 0x00, 0x00, ...]
```

---

### OpCode 0x41: SET_AMPLITUDE

**Prop√≥sito**: Configurar amplitude/voltagem da emiss√£o

**Formato do Comando**:
```
Byte 0: 0x41 (OpCode)
Byte 1: Amplitude (0-255)
Byte 2: 0x00 (reservado)
Byte 3: 0x00 (reservado)
```

**Encoding**: Percentagem como byte (0-255 mapeado para 0-100%)
- 0% amplitude: 0x00
- 50% amplitude: 0x7F (127)
- 100% amplitude: 0xFF (255)

**Resposta**: 8 bytes com confirma√ß√£o

**Valida√ß√£o**:
- Range: 0-100% (ou 0-10V interno, mapeado para 0-255)
- Rejeita: valores negativos, > 255 (saturado a 255)

**Timeout**: 2.5ms

**Exemplo em C#**:
```csharp
var cmd = HS3CommandPresets.SetAmplitude(50.0);
// Resultado: [0x41, 0x7F, 0x00, 0x00, ...]
```

---

### OpCode 0x42: START_EMISSION

**Prop√≥sito**: Iniciar emiss√£o com configura√ß√µes atuais

**Formato do Comando**:
```
Byte 0: 0x42 (OpCode)
Byte 1: 0x00 (n√£o utilizado)
Byte 2: 0x00 (n√£o utilizado)
Byte 3: 0x00 (n√£o utilizado)
```

**Pr√©-requisitos**:
1. Frequ√™ncia deve estar configurada (0x40)
2. Amplitude deve estar configurada (0x41)
3. Forma de onda deve estar configurada (0x44)

**Resposta**: 8 bytes com confirma√ß√£o (Bit 0 de Byte 0 = sucesso)

**Valida√ß√£o**:
- Falha se frequ√™ncia/amplitude n√£o configuradas
- Falha se emiss√£o j√° est√° em curso

**Timeout**: 2.5ms

**Exemplo em C#**:
```csharp
// Sequ√™ncia completa:
var setup = new[]
{
    HS3CommandPresets.SetFrequency(100.0),
    HS3CommandPresets.SetAmplitude(50.0),
    HS3CommandPresets.SetWaveform(HS3CommandPresets.Waveform.Sine),
    HS3CommandPresets.StartEmission()  // Agora √© seguro
};
```

---

### OpCode 0x43: STOP_EMISSION

**Prop√≥sito**: Parar emiss√£o em curso

**Formato do Comando**:
```
Byte 0: 0x43 (OpCode)
Byte 1: 0x00 (n√£o utilizado)
Byte 2: 0x00 (n√£o utilizado)
Byte 3: 0x00 (n√£o utilizado)
```

**Resposta**: 8 bytes com confirma√ß√£o

**Valida√ß√£o**:
- Seguro chamar mesmo que n√£o esteja emitindo
- Sempre sucede

**Timeout**: 2.5ms

**Exemplo em C#**:
```csharp
var cmd = HS3CommandPresets.StopEmission();
// Resultado: [0x43, 0x00, 0x00, 0x00, ...]
```

---

### OpCode 0x44: SET_WAVEFORM

**Prop√≥sito**: Configurar forma de onda da emiss√£o

**Formato do Comando**:
```
Byte 0: 0x44 (OpCode)
Byte 1: Waveform (0x00-0x03)
Byte 2: 0x00 (reservado)
Byte 3: 0x00 (reservado)
```

**Waveform Values**:
| Valor | Nome | Descri√ß√£o |
|-------|------|-----------|
| 0x00 | Sine | Onda sinusoidal suave (padr√£o) |
| 0x01 | Square | Onda quadrada (digital, mais "√°spera") |
| 0x02 | Triangle | Onda triangular (linear, intermedi√°ria) |
| 0x03 | Sawtooth | Onda dente de serra (rampa linear) |

**Resposta**: 8 bytes com confirma√ß√£o

**Valida√ß√£o**:
- Range: 0x00-0x03 (rejeita valores > 0x03)

**Timeout**: 2.5ms

**Exemplo em C#**:
```csharp
var cmd = HS3CommandPresets.SetWaveform(HS3CommandPresets.Waveform.Square);
// Resultado: [0x44, 0x01, 0x00, 0x00, ...]
```

---

### OpCode 0x45: SET_DURATION

**Prop√≥sito**: Configurar dura√ß√£o da emiss√£o (hipot√©tico, n√£o confirmado)

**Formato do Comando**:
```
Byte 0: 0x45 (OpCode)
Byte 1: Dura√ß√£o em segundos (0-255)
Byte 2: 0x00 (reservado)
Byte 3: 0x00 (reservado)
```

**Duration Values**:
| Valor | Significado |
|-------|-------------|
| 0x00 | Emiss√£o cont√≠nua (sem limite) |
| 0x01-0xFE | Dura√ß√£o em segundos (1-254 seg) |
| 0xFF | 255 segundos (m√°ximo) |

**Resposta**: 8 bytes com confirma√ß√£o

**Timeout**: 2.5ms

**Nota**: Opcode 0x45 √© hipot√©tico. Validar com hardware real quando dispon√≠vel.

---

### OpCode 0x03: GET_STATUS

**Prop√≥sito**: Query status atual do dispositivo

**Formato do Comando**:
```
Byte 0: 0x03 (OpCode)
Byte 1: 0x00 (n√£o utilizado)
Byte 2: 0x00 (n√£o utilizado)
Byte 3: 0x00 (n√£o utilizado)
```

**Resposta** (8 bytes):
```
Byte 0: Status Flags
  Bit 0: EMITTING (1 = emitindo, 0 = parado)
  Bit 1: ERROR (1 = erro, 0 = OK)
  Bit 2: READY (1 = pronto, 0 = n√£o pronto)
  Bit 3: INITIALIZED (1 = inicializado, 0 = n√£o)
  Bits 4-7: Reservado

Bytes 1-7: Dados adicionais (firmware-specific)
```

**Exemplo de Parsing**:
```csharp
var statusCmd = HS3CommandPresets.GetStatus();
// Response[0] = 0x01 ‚Üí Emitting
// Response[0] = 0x02 ‚Üí Error state
// Response[0] = 0x04 ‚Üí Ready to emit
```

**Timeout**: 2.5ms

---

### OpCode 0x04: GET_VERSION

**Prop√≥sito**: Query vers√£o firmware (hipot√©tico)

**Formato do Comando**:
```
Byte 0: 0x04 (OpCode)
Byte 1: 0x00
Byte 2: 0x00
Byte 3: 0x00
```

**Resposta** (8 bytes):
```
Byte 0: Vers√£o Major
Byte 1: Vers√£o Minor
Byte 2: Vers√£o Patch
Bytes 3-7: Build/Serial/Reservado
```

**Exemplo**:
```
Response: [1, 2, 3, 0, 0, 0, 0, 0]
‚Üí Firmware vers√£o 1.2.3
```

---

### OpCode 0x05: GET_ERROR

**Prop√≥sito**: Query c√≥digo de erro mais recente (hipot√©tico)

**Formato do Comando**:
```
Byte 0: 0x05 (OpCode)
Byte 1: 0x00
Byte 2: 0x00
Byte 3: 0x00
```

**Resposta** (8 bytes):
```
Byte 0: ErrorCode
  0x00 = Sem erro
  0x01 = Erro de comunica√ß√£o USB
  0x02 = Par√¢metros inv√°lidos
  0x03 = Dispositivo n√£o inicializado
  0x04 = Emiss√£o j√° em progresso
  0x05 = Emiss√£o n√£o ativa

Bytes 1-7: Contexto do erro
```

---

## ‚è±Ô∏è Timing e Constraints

### Timeout Padr√£o por Opera√ß√£o

| Opera√ß√£o | Timeout | Raz√£o |
|----------|---------|-------|
| READ (IOCTL 0x222051) | 2.5ms | Limite USB bulk 64 bytes |
| WRITE (IOCTL 0x22204E) | 2.5ms | Limite USB bulk 64 bytes |
| SET_FREQUENCY | 2.5ms | Processamento simples |
| SET_AMPLITUDE | 2.5ms | Processamento simples |
| START_EMISSION | 5.0ms | Hardware pode precisar inicializar |
| STOP_EMISSION | 5.0ms | Hardware pode precisar desligar |
| GET_STATUS | 2.5ms | Simples query |

### Sequ√™ncia de Emiss√£o

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Sequ√™ncia Observada (33 ciclos READ‚ÜíWRITE)                   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ 1.  READ (0x222051)  - Query resposta anterior                ‚îÇ
‚îÇ     ‚Üì                                                          ‚îÇ
‚îÇ 2.  WRITE (0x22204E) - Enviar comando (ex: SET_FREQUENCY)    ‚îÇ
‚îÇ     ‚Üì                                                          ‚îÇ
‚îÇ 3.  READ (0x222051)  - Query confirma√ß√£o                     ‚îÇ
‚îÇ     ‚Üì                                                          ‚îÇ
‚îÇ 4.  WRITE (0x22204E) - Pr√≥ximo comando (ex: SET_AMPLITUDE)   ‚îÇ
‚îÇ     ‚Üì                                                          ‚îÇ
‚îÇ ...repetir 33 vezes...                                        ‚îÇ
‚îÇ                                                                ‚îÇ
‚îÇ Total: ~165ms (33 ciclos √ó 5ms cada)                          ‚îÇ
‚îÇ Thread-safety: Todas opera√ß√µes na mesma thread (lock)         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üõ°Ô∏è Padr√µes de Erro e Recupera√ß√£o

### Circuit Breaker Pattern (implementado em HS3RobustnessHelpers)

```
STATE: CLOSED (Normal)
‚îú‚îÄ Comando sucede ‚Üí Permanecer CLOSED
‚îú‚îÄ 5+ falhas consecutivas ‚Üí Transi√ß√£o para OPEN
‚îÇ
STATE: OPEN (Falhas detectadas)
‚îú‚îÄ Bloqueia comunica√ß√£o imediatamente
‚îú‚îÄ Agenda recovery ap√≥s 30 segundos
‚îÇ
STATE: RECOVERY (Tentando fechar)
‚îú‚îÄ Tenta 1 comando
‚îú‚îÄ Sucesso ‚Üí volta para CLOSED
‚îî‚îÄ Falha ‚Üí permanece OPEN
```

### Retry Strategy (Exponential Backoff)

```
Tentativa 1: Falha ‚Üí Aguardar 100ms
Tentativa 2: Falha ‚Üí Aguardar 200ms
Tentativa 3: Falha ‚Üí Falha final (timeout)

Total delay: ~300ms (100 + 200)
```

---

## üìç Implementa√ß√£o em C#

### Usando Presets

```csharp
// Setup simples
var freqCmd = HS3CommandPresets.SetFrequency(100.0);
var ampCmd = HS3CommandPresets.SetAmplitude(50.0);
var waveCmd = HS3CommandPresets.SetWaveform(HS3CommandPresets.Waveform.Sine);
var startCmd = HS3CommandPresets.StartEmission();

// Ou sequ√™ncia completa
var sequence = HS3CommandPresets.EmitFrequencySequence(100.0, 50.0);
foreach (var cmd in sequence)
{
    bool success = _service.SendCommand(cmd);
    if (!success) break;
}

// Com dura√ß√£o
var timedSeq = HS3CommandPresets.EmitFrequencyWithDurationSequence(
    frequencyHz: 432.0,
    amplitudePercent: 75.0,
    durationSeconds: 30
);
```

### Query Status

```csharp
var statusCmd = HS3CommandPresets.GetStatus();
var response = _protocol.WriteOperation(statusCmd[0], 8, out byte[] statusBytes);

if ((statusBytes[0] & 0x01) != 0)
    Console.WriteLine("Device is currently emitting");

if ((statusBytes[0] & 0x02) != 0)
    Console.WriteLine("Device error detected!");
```

---

## ‚úÖ Valida√ß√£o

- [x] Opcodes 0x40-0x45 documentados
- [x] Opcodes diagn√≥stico 0x03-0x05 documentados
- [x] Formats de input/output especificados
- [x] Timeouts definidos
- [x] Exemplos de uso inclu√≠dos
- [x] Testes unit√°rios criados (80+ testes)
- [ ] Valida√ß√£o com hardware real (pending)

---

## üìù Notas

- **Opcodes 0x45, 0x04, 0x05**: Hipot√©ticos at√© confirma√ß√£o com hardware real
- **Encoding de frequ√™ncia**: Assume little-endian 24-bit. Validar com dispositivo.
- **Thread-safety**: Todas opera√ß√µes DEVEM estar num √∫nico thread com lock
- **USB Timing**: 2.5ms √© limite te√≥rico. Adicionar margem (5ms) em produ√ß√£o.

---

## üîó Refer√™ncias

- `HS3Protocol.cs`: Constantes IOCTL
- `HS3CommandBuilder.cs`: Constru√ß√£o de comandos
- `HS3CommandPresets.cs`: Presets predefinidos
- `HS3RobustnessHelpers.cs`: Retry + circuit breaker
- `TiePieHS3Service.cs`: Integra√ß√£o de alto n√≠vel
- `HS3CommandBuilderTests.cs`: 80+ testes unit√°rios
- `HS3CommandPresetsTests.cs`: 50+ testes de presets

---

**√öltima atualiza√ß√£o**: 20 de outubro de 2025
**Vers√£o de protocolo**: HS3 v1.0
**Compila√ß√£o**: .NET 8.0 LTS, C# 12
