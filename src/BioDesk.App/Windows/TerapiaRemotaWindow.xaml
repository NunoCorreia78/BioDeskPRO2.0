<Window x:Class="BioDesk.App.Windows.TerapiaRemotaWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:BioDesk.ViewModels.Windows;assembly=BioDesk.ViewModels"
        mc:Ignorable="d"
        d:DataContext="{d:DesignInstance Type=vm:TerapiaRemotaViewModel}"
        Title="Terapia Remota (Informacional)"
        Height="500" Width="600"
        WindowStartupLocation="CenterOwner"
        Background="{DynamicResource FundoPrincipal}">
    
    <Grid Margin="30">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Título -->
        <TextBlock Grid.Row="0" 
                   Text="Configuração Terapia Remota"
                   FontSize="24" FontWeight="SemiBold"
                   Foreground="{DynamicResource TextoPrincipal}"
                   Margin="0,0,0,20"/>
        
        <!-- Configurações -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <!-- Protocolos Selecionados -->
                <TextBlock Text="Protocolos Selecionados:"
                           FontSize="14" FontWeight="SemiBold"
                           Foreground="{DynamicResource TextoPrincipal}"
                           Margin="0,0,0,8"/>
                <ListBox ItemsSource="{Binding ProtocolosSelecionados}"
                         Height="100"
                         Background="{DynamicResource Cartao}"
                         BorderBrush="{DynamicResource Borda}"
                         Margin="0,0,0,20"/>
                
                <!-- Duração -->
                <Grid Margin="0,0,0,15">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Column="0" Text="Duração (dias):"
                               VerticalAlignment="Center"
                               Width="150"
                               Foreground="{DynamicResource TextoPrincipal}"/>
                    <TextBox Grid.Column="1"
                             Text="{Binding DuracaoDias, UpdateSourceTrigger=PropertyChanged}"
                             Width="100" HorizontalAlignment="Left"
                             Padding="8,6"/>
                </Grid>
                
                <!-- Anchor -->
                <Grid Margin="0,0,0,15">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Column="0" Text="Anchor (semente):"
                               VerticalAlignment="Center"
                               Width="150"
                               Foreground="{DynamicResource TextoPrincipal}"/>
                    <TextBox Grid.Column="1"
                             Text="{Binding Anchor, UpdateSourceTrigger=PropertyChanged}"
                             Padding="8,6"/>
                </Grid>
                
                <!-- Hash Algoritmo -->
                <Grid Margin="0,0,0,15">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Column="0" Text="Hash:"
                               VerticalAlignment="Center"
                               Width="150"
                               Foreground="{DynamicResource TextoPrincipal}"/>
                    <ComboBox Grid.Column="1"
                              ItemsSource="{Binding HashAlgoritmos}"
                              SelectedItem="{Binding HashAlgoritmo}"
                              Width="200" HorizontalAlignment="Left"
                              Padding="8,6"/>
                </Grid>
                
                <!-- Modulação -->
                <Grid Margin="0,0,0,15">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Column="0" Text="Modulação:"
                               VerticalAlignment="Center"
                               Width="150"
                               Foreground="{DynamicResource TextoPrincipal}"/>
                    <ComboBox Grid.Column="1"
                              ItemsSource="{Binding TiposModulacao}"
                              SelectedItem="{Binding Modulacao}"
                              Width="200" HorizontalAlignment="Left"
                              Padding="8,6"/>
                </Grid>
                
                <!-- Ciclos -->
                <Grid Margin="0,0,0,15">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Column="0" Text="Ciclos:"
                               VerticalAlignment="Center"
                               Width="150"
                               Foreground="{DynamicResource TextoPrincipal}"/>
                    <TextBox Grid.Column="1"
                             Text="{Binding Ciclos, UpdateSourceTrigger=PropertyChanged}"
                             Width="100" HorizontalAlignment="Left"
                             Padding="8,6"/>
                </Grid>
            </StackPanel>
        </ScrollViewer>
        
        <!-- Status -->
        <Border Grid.Row="2"
                Background="{DynamicResource Cartao}"
                BorderBrush="{DynamicResource Borda}"
                BorderThickness="1"
                Padding="15"
                Margin="0,20,0,20"
                Visibility="{Binding EmTransmissao, Converter={StaticResource BooleanToVisibilityConverter}}">
            <StackPanel>
                <TextBlock Text="⚡ Transmissão em curso..."
                           FontSize="14" FontWeight="SemiBold"
                           Foreground="#9CAF97"/>
                <TextBlock Text="{Binding DuracaoDias, StringFormat='Duração: {0} dias'}"
                           FontSize="12"
                           Foreground="{DynamicResource TextoSecundario}"
                           Margin="0,5,0,0"/>
            </StackPanel>
        </Border>
        
        <!-- Botões -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button Content="Iniciar Transmissão"
                    Command="{Binding IniciarTransmissaoCommand}"
                    Width="160" Height="40"
                    Background="#9CAF97"
                    Foreground="White"
                    FontWeight="SemiBold"
                    Margin="0,0,10,0"
                    Visibility="{Binding EmTransmissao, Converter={StaticResource InverseBooleanToVisibilityConverter}}"/>
            
            <Button Content="Parar"
                    Command="{Binding PararTransmissaoCommand}"
                    Width="100" Height="40"
                    Background="#D9534F"
                    Foreground="White"
                    FontWeight="SemiBold"
                    Margin="0,0,10,0"
                    Visibility="{Binding EmTransmissao, Converter={StaticResource BooleanToVisibilityConverter}}"/>
            
            <Button Content="Fechar"
                    Click="CloseButton_Click"
                    Width="100" Height="40"
                    Background="{DynamicResource Borda}"
                    Foreground="{DynamicResource TextoPrincipal}"/>
        </StackPanel>
    </Grid>
</Window>
