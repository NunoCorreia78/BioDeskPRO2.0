<UserControl x:Class="BioDesk.App.Views.FichaPacienteView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:viewModels="clr-namespace:BioDesk.ViewModels;assembly=BioDesk.ViewModels"
             mc:Ignorable="d" 
             d:DesignHeight="800" d:DesignWidth="1200"
             d:DataContext="{d:DesignInstance Type=viewModels:FichaPacienteViewModel}">

    <UserControl.Resources>
        <ResourceDictionary>
            <!-- Converter para IsLoading -->
            <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
            
            <!-- Gradiente de fundo terroso -->
            <LinearGradientBrush x:Key="BackgroundGradient" StartPoint="0,0" EndPoint="0,1">
                <GradientStop Color="#FCFDFB" Offset="0"/>
                <GradientStop Color="#F2F5F0" Offset="1"/>
            </LinearGradientBrush>

            <!-- Estilo para cartÃµes de seÃ§Ã£o -->
            <Style x:Key="SectionCard" TargetType="Border">
                <Setter Property="Background" Value="#F7F9F6"/>
                <Setter Property="BorderBrush" Value="#E3E9DE"/>
                <Setter Property="BorderThickness" Value="1"/>
                <Setter Property="CornerRadius" Value="8"/>
                <Setter Property="Padding" Value="20"/>
                <Setter Property="Margin" Value="0,0,0,15"/>
                <Setter Property="Effect">
                    <Setter.Value>
                        <DropShadowEffect Color="#E3E9DE" ShadowDepth="2" BlurRadius="8" Opacity="0.3"/>
                    </Setter.Value>
                </Setter>
            </Style>

            <!-- Estilo para rÃ³tulos de campo -->
            <Style x:Key="FieldLabel" TargetType="TextBlock">
                <Setter Property="FontWeight" Value="Medium"/>
                <Setter Property="Foreground" Value="#3F4A3D"/>
                <Setter Property="Margin" Value="0,0,0,5"/>
                <Setter Property="FontSize" Value="13"/>
            </Style>

            <!-- Estilo para inputs -->
            <Style x:Key="FieldInput" TargetType="TextBox">
                <Setter Property="Padding" Value="10"/>
                <Setter Property="Margin" Value="0,0,0,15"/>
                <Setter Property="BorderBrush" Value="#E3E9DE"/>
                <Setter Property="BorderThickness" Value="1"/>
                <Setter Property="Background" Value="White"/>
                <Setter Property="FontSize" Value="14"/>
                <Style.Triggers>
                    <Trigger Property="IsFocused" Value="True">
                        <Setter Property="BorderBrush" Value="#9CAF97"/>
                    </Trigger>
                </Style.Triggers>
            </Style>
            
            <Style x:Key="NaturoTabItem" TargetType="TabItem">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="TabItem">
                            <Grid>
                                <Border Name="Border" Background="#F7F9F6" BorderBrush="#E3E9DE" 
                                        BorderThickness="1,1,1,0" CornerRadius="8,8,0,0" 
                                        Margin="2,0,2,0" Padding="20,12">
                                    <ContentPresenter ContentSource="Header"/>
                                </Border>
                            </Grid>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsSelected" Value="True">
                                    <Setter TargetName="Border" Property="Background" Value="#9CAF97"/>
                                    <Setter Property="Foreground" Value="White"/>
                                </Trigger>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="Border" Property="Background" Value="#879B83"/>
                                    <Setter Property="Foreground" Value="White"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </ResourceDictionary>
    </UserControl.Resources>

    <Grid Background="{StaticResource BackgroundGradient}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="#9CAF97" Padding="20,15">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <!-- BotÃ£o Voltar -->
                <Button Grid.Column="0" Content="â† Dashboard" Command="{Binding VoltarCommand}" 
                        Background="Transparent" Foreground="White" BorderThickness="0"
                        Padding="0,0,20,0" FontWeight="Medium" VerticalAlignment="Center"
                        Cursor="Hand"/>
                
                <StackPanel Grid.Column="1">
                    <TextBlock Text="{Binding PacienteAtual.Nome, FallbackValue='Novo Paciente'}" 
                               FontSize="22" FontWeight="Bold" Foreground="White"/>
                </StackPanel>
                
                <StackPanel Grid.Column="2" Orientation="Horizontal">
                    <TextBlock Text="{Binding PacienteAtual.Idade, StringFormat='Idade: {0} anos'}" 
                               FontSize="14" Foreground="White" Margin="0,0,20,0" VerticalAlignment="Center"/>
                    <TextBlock Text="{Binding PacienteAtual.IMC, StringFormat='IMC: {0:F1}'}" 
                               FontSize="14" Foreground="White" VerticalAlignment="Center"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Main Content com Nova Estrutura Organizacional -->
        <TabControl Grid.Row="1" Background="Transparent" BorderThickness="0" Margin="20">
            
            <!-- ======================= TAB 1: DADOS PESSOAIS ======================= -->
            <TabItem Header="ðŸ“‹ Dados Pessoais" Style="{StaticResource NaturoTabItem}">
                <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="10">
                    <StackPanel>
                        
                        <!-- InformaÃ§Ãµes BÃ¡sicas -->
                        <Border Style="{StaticResource SectionCard}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                
                                <StackPanel Grid.Column="0" Margin="0,0,20,0">
                                    <TextBlock Text="Nome Completo *" Style="{StaticResource FieldLabel}"/>
                                    <TextBox Text="{Binding PacienteAtual.Nome, UpdateSourceTrigger=PropertyChanged}" 
                                             Style="{StaticResource FieldInput}"/>
                                    
                                    <TextBlock Text="Data de Nascimento *" Style="{StaticResource FieldLabel}"/>
                                    <DatePicker SelectedDate="{Binding PacienteAtual.DataNascimento}" 
                                                Margin="0,0,0,15"/>
                                    
                                    <TextBlock Text="Email *" Style="{StaticResource FieldLabel}"/>
                                    <TextBox Text="{Binding PacienteAtual.Email, UpdateSourceTrigger=PropertyChanged}" 
                                             Style="{StaticResource FieldInput}"/>
                                </StackPanel>
                                
                                <StackPanel Grid.Column="1" Margin="0,0,20,0">
                                    <TextBlock Text="Telefone" Style="{StaticResource FieldLabel}"/>
                                    <TextBox Text="{Binding PacienteAtual.Telefone, UpdateSourceTrigger=PropertyChanged}" 
                                             Style="{StaticResource FieldInput}"/>
                                    
                                    <TextBlock Text="ProfissÃ£o" Style="{StaticResource FieldLabel}"/>
                                    <TextBox Text="{Binding PacienteAtual.Profissao, UpdateSourceTrigger=PropertyChanged}" 
                                             Style="{StaticResource FieldInput}"/>
                                             
                                    <TextBlock Text="Estado Civil" Style="{StaticResource FieldLabel}"/>
                                    <ComboBox SelectedItem="{Binding PacienteAtual.EstadoCivil}" 
                                              Margin="0,0,0,15">
                                        <ComboBoxItem Content="Solteiro(a)"/>
                                        <ComboBoxItem Content="Casado(a)"/>
                                        <ComboBoxItem Content="Divorciado(a)"/>
                                        <ComboBoxItem Content="ViÃºvo(a)"/>
                                    </ComboBox>
                                </StackPanel>
                                
                                <StackPanel Grid.Column="2">
                                    <TextBlock Text="Altura (cm)" Style="{StaticResource FieldLabel}"/>
                                    <TextBox Text="{Binding PacienteAtual.Altura, UpdateSourceTrigger=PropertyChanged}" 
                                             Style="{StaticResource FieldInput}"/>
                                    
                                    <TextBlock Text="Peso (kg)" Style="{StaticResource FieldLabel}"/>
                                    <TextBox Text="{Binding PacienteAtual.Peso, UpdateSourceTrigger=PropertyChanged}" 
                                             Style="{StaticResource FieldInput}"/>
                                             
                                    <TextBlock Text="Tipo SanguÃ­neo" Style="{StaticResource FieldLabel}"/>
                                    <ComboBox SelectedItem="{Binding PacienteAtual.TipoSanguineo}" 
                                              Margin="0,0,0,15">
                                        <ComboBoxItem Content="A+"/>
                                        <ComboBoxItem Content="A-"/>
                                        <ComboBoxItem Content="B+"/>
                                        <ComboBoxItem Content="B-"/>
                                        <ComboBoxItem Content="AB+"/>
                                        <ComboBoxItem Content="AB-"/>
                                        <ComboBoxItem Content="O+"/>
                                        <ComboBoxItem Content="O-"/>
                                    </ComboBox>
                                </StackPanel>
                            </Grid>
                        </Border>
                        
                        <!-- Contacto de EmergÃªncia -->
                        <Border Style="{StaticResource SectionCard}">
                            <StackPanel>
                                <TextBlock Text="CONTACTO DE EMERGÃŠNCIA" FontWeight="Bold" 
                                         Foreground="#3F4A3D" Margin="0,0,0,15" FontSize="16"/>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <StackPanel Grid.Column="0" Margin="0,0,20,0">
                                        <TextBlock Text="Nome do Contacto" Style="{StaticResource FieldLabel}"/>
                                        <TextBox Text="{Binding PacienteAtual.ContactoEmergenciaNome, UpdateSourceTrigger=PropertyChanged}" 
                                                 Style="{StaticResource FieldInput}"/>
                                    </StackPanel>
                                    
                                    <StackPanel Grid.Column="1">
                                        <TextBlock Text="Telefone de EmergÃªncia" Style="{StaticResource FieldLabel}"/>
                                        <TextBox Text="{Binding PacienteAtual.ContactoEmergenciaTelefone, UpdateSourceTrigger=PropertyChanged}" 
                                                 Style="{StaticResource FieldInput}"/>
                                    </StackPanel>
                                </Grid>
                            </StackPanel>
                        </Border>
                        
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- ======================= TAB 2: GESTÃƒO CLÃNICA ======================= -->
            <TabItem Header="ðŸ¥ GestÃ£o ClÃ­nica" Style="{StaticResource NaturoTabItem}">
                <!-- Sub-TabControl para GestÃ£o ClÃ­nica -->
                <TabControl Background="Transparent" BorderThickness="0" Margin="10,0">
                    
                    <!-- SUB-TAB 2.1: ANAMNESE -->
                    <TabItem Header="ðŸ©º Anamnese" Style="{StaticResource NaturoTabItem}">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="10">
                            <StackPanel>
                                
                                <!-- Queixa Principal -->
                                <Border Style="{StaticResource SectionCard}">
                                    <StackPanel>
                                        <TextBlock Text="QUEIXA PRINCIPAL" FontWeight="Bold" 
                                                 Foreground="#3F4A3D" Margin="0,0,0,15" FontSize="16"/>
                                        
                                        <TextBlock Text="Motivo da consulta" Style="{StaticResource FieldLabel}"/>
                                        <ComboBox Margin="0,0,0,10">
                                            <ComboBoxItem Content="Dores de cabeÃ§a / Enxaquecas"/>
                                            <ComboBoxItem Content="Problemas digestivos"/>
                                            <ComboBoxItem Content="DistÃºrbios do sono"/>
                                            <ComboBoxItem Content="Stress e ansiedade"/>
                                            <ComboBoxItem Content="Fadiga crÃ³nica"/>
                                            <ComboBoxItem Content="Problemas de pele"/>
                                            <ComboBoxItem Content="Dores mÃºsculo-esquelÃ©ticas"/>
                                            <ComboBoxItem Content="Problemas respiratÃ³rios"/>
                                            <ComboBoxItem Content="Check-up preventivo"/>
                                            <ComboBoxItem Content="Outras queixas"/>
                                        </ComboBox>
                                        
                                        <TextBlock Text="DescriÃ§Ã£o detalhada da queixa" Style="{StaticResource FieldLabel}" Margin="0,15,0,5"/>
                                        <TextBox Text="{Binding PacienteAtual.QueixaPrincipal, UpdateSourceTrigger=PropertyChanged}" 
                                                 Style="{StaticResource FieldInput}" MinHeight="80" TextWrapping="Wrap" 
                                                 AcceptsReturn="True" VerticalScrollBarVisibility="Auto"/>
                                    </StackPanel>
                                </Border>

                                <!-- HistÃ³ria da DoenÃ§a Atual (HDA) -->
                                <Border Style="{StaticResource SectionCard}">
                                    <StackPanel>
                                        <TextBlock Text="HISTÃ“RIA DA DOENÃ‡A ATUAL" FontWeight="Bold" 
                                                 Foreground="#3F4A3D" Margin="0,0,0,15" FontSize="16"/>
                                        
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            
                                            <StackPanel Grid.Column="0" Margin="0,0,20,0">
                                                <TextBlock Text="InÃ­cio dos sintomas" Style="{StaticResource FieldLabel}"/>
                                                <ComboBox Margin="0,0,0,15">
                                                    <ComboBoxItem Content="HÃ¡ poucos dias"/>
                                                    <ComboBoxItem Content="HÃ¡ 1-2 semanas"/>
                                                    <ComboBoxItem Content="HÃ¡ 1 mÃªs"/>
                                                    <ComboBoxItem Content="HÃ¡ 3 meses"/>
                                                    <ComboBoxItem Content="HÃ¡ 6 meses"/>
                                                    <ComboBoxItem Content="HÃ¡ 1 ano"/>
                                                    <ComboBoxItem Content="HÃ¡ mais de 1 ano"/>
                                                </ComboBox>
                                                
                                                <TextBlock Text="EvoluÃ§Ã£o" Style="{StaticResource FieldLabel}"/>
                                                <ComboBox Margin="0,0,0,15">
                                                    <ComboBoxItem Content="Melhorando gradualmente"/>
                                                    <ComboBoxItem Content="MantÃ©m-se estÃ¡vel"/>
                                                    <ComboBoxItem Content="Piorando progressivamente"/>
                                                    <ComboBoxItem Content="AlternÃ¢ncia (melhora/piora)"/>
                                                    <ComboBoxItem Content="EpisÃ³dios esporÃ¡dicos"/>
                                                </ComboBox>
                                                
                                                <TextBlock Text="Fatores desencadeantes" Style="{StaticResource FieldLabel}"/>
                                                <StackPanel>
                                                    <CheckBox Content="Stress emocional" Margin="0,2"/>
                                                    <CheckBox Content="MudanÃ§as alimentares" Margin="0,2"/>
                                                    <CheckBox Content="AlteraÃ§Ãµes do sono" Margin="0,2"/>
                                                    <CheckBox Content="ExposiÃ§Ã£o ambiental" Margin="0,2"/>
                                                    <CheckBox Content="Atividade fÃ­sica intensa" Margin="0,2"/>
                                                    <CheckBox Content="MudanÃ§as hormonais" Margin="0,2"/>
                                                </StackPanel>
                                            </StackPanel>
                                            
                                            <StackPanel Grid.Column="1">
                                                <TextBlock Text="Intensidade dos sintomas (0-10)" Style="{StaticResource FieldLabel}"/>
                                                <Slider Value="{Binding PacienteAtual.IntensidadeSintomas}" 
                                                        Minimum="0" Maximum="10" TickPlacement="BottomRight" 
                                                        TickFrequency="1" IsSnapToTickEnabled="True"
                                                        Margin="0,0,0,10"/>
                                                <TextBlock Text="{Binding PacienteAtual.IntensidadeSintomas, StringFormat='NÃ­vel: {0}'}" 
                                                           HorizontalAlignment="Center" Margin="0,0,0,15"/>
                                                
                                                <TextBlock Text="Fatores de alÃ­vio" Style="{StaticResource FieldLabel}"/>
                                                <StackPanel>
                                                    <CheckBox Content="Repouso" Margin="0,2"/>
                                                    <CheckBox Content="Atividade fÃ­sica ligeira" Margin="0,2"/>
                                                    <CheckBox Content="Calor (compressas)" Margin="0,2"/>
                                                    <CheckBox Content="Frio (gelo)" Margin="0,2"/>
                                                    <CheckBox Content="Massagem" Margin="0,2"/>
                                                    <CheckBox Content="MedicaÃ§Ã£o" Margin="0,2"/>
                                                    <CheckBox Content="TÃ©cnicas de relaxamento" Margin="0,2"/>
                                                    <CheckBox Content="MudanÃ§a de posiÃ§Ã£o" Margin="0,2"/>
                                                </StackPanel>
                                            </StackPanel>
                                        </Grid>
                                        
                                        <TextBlock Text="ObservaÃ§Ãµes detalhadas" Style="{StaticResource FieldLabel}" Margin="0,15,0,5"/>
                                        <TextBox Text="{Binding PacienteAtual.HistoriaDoencaAtual, UpdateSourceTrigger=PropertyChanged}" 
                                                 Style="{StaticResource FieldInput}" MinHeight="100" TextWrapping="Wrap" 
                                                 AcceptsReturn="True" VerticalScrollBarVisibility="Auto"/>
                                    </StackPanel>
                                </Border>
                                
                                <!-- Antecedentes Pessoais -->
                                <Border Style="{StaticResource SectionCard}">
                                    <StackPanel>
                                        <TextBlock Text="ANTECEDENTES PESSOAIS" FontWeight="Bold" 
                                                 Foreground="#3F4A3D" Margin="0,0,0,15" FontSize="16"/>
                                        
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            
                                            <StackPanel Grid.Column="0" Margin="0,0,20,0">
                                                <TextBlock Text="DoenÃ§as anteriores" Style="{StaticResource FieldLabel}" Margin="0,0,0,5"/>
                                                <StackPanel>
                                                    <CheckBox Content="Diabetes" Margin="0,2"/>
                                                    <CheckBox Content="HipertensÃ£o arterial" Margin="0,2"/>
                                                    <CheckBox Content="DoenÃ§as cardiovasculares" Margin="0,2"/>
                                                    <CheckBox Content="DoenÃ§as respiratÃ³rias" Margin="0,2"/>
                                                    <CheckBox Content="DoenÃ§as gastrointestinais" Margin="0,2"/>
                                                    <CheckBox Content="DoenÃ§as neurolÃ³gicas" Margin="0,2"/>
                                                    <CheckBox Content="DoenÃ§as endÃ³crinas" Margin="0,2"/>
                                                    <CheckBox Content="Cancro" Margin="0,2"/>
                                                    <CheckBox Content="DoenÃ§as autoimunes" Margin="0,2"/>
                                                </StackPanel>
                                                
                                                <TextBlock Text="Cirurgias realizadas" Style="{StaticResource FieldLabel}" Margin="0,15,0,5"/>
                                                <TextBox Text="{Binding PacienteAtual.CirurgiasRealizadas, UpdateSourceTrigger=PropertyChanged}"
                                                         Style="{StaticResource FieldInput}" MinHeight="60" TextWrapping="Wrap" AcceptsReturn="True"/>
                                            </StackPanel>
                                            
                                            <StackPanel Grid.Column="1">
                                                <TextBlock Text="Alergias conhecidas" Style="{StaticResource FieldLabel}" Margin="0,0,0,5"/>
                                                <StackPanel>
                                                    <CheckBox Content="Medicamentos" Margin="0,2"/>
                                                    <CheckBox Content="Alimentos" Margin="0,2"/>
                                                    <CheckBox Content="PÃ³lenes" Margin="0,2"/>
                                                    <CheckBox Content="Ãcaros" Margin="0,2"/>
                                                    <CheckBox Content="Animais" Margin="0,2"/>
                                                    <CheckBox Content="Produtos quÃ­micos" Margin="0,2"/>
                                                    <CheckBox Content="LÃ¡tex" Margin="0,2"/>
                                                    <CheckBox Content="Outras alergias:" Margin="0,2"/>
                                                    <TextBox Text="{Binding PacienteAtual.Alergias, UpdateSourceTrigger=PropertyChanged}"
                                                             Style="{StaticResource FieldInput}" Margin="20,2,0,10"/>
                                                </StackPanel>
                                                
                                                <TextBlock Text="MedicaÃ§Ã£o atual" Style="{StaticResource FieldLabel}" Margin="0,15,0,5"/>
                                                <StackPanel>
                                                    <CheckBox Content="Anti-hipertensores" Margin="0,2"/>
                                                    <CheckBox Content="AntidiabÃ©ticos" Margin="0,2"/>
                                                    <CheckBox Content="AnalgÃ©sicos" Margin="0,2"/>
                                                    <CheckBox Content="Anti-inflamatÃ³rios" Margin="0,2"/>
                                                    <CheckBox Content="Antidepressivos" Margin="0,2"/>
                                                    <CheckBox Content="Suplementos vitamÃ­nicos" Margin="0,2"/>
                                                    <CheckBox Content="Outros medicamentos:" Margin="0,2"/>
                                                    <TextBox Text="{Binding PacienteAtual.MedicamentosAtuais, UpdateSourceTrigger=PropertyChanged}"
                                                             Style="{StaticResource FieldInput}" Margin="20,2,0,0"/>
                                                </StackPanel>
                                            </StackPanel>
                                        </Grid>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </ScrollViewer>
                    </TabItem>
                    
                    <!-- SUB-TAB 2.2: DECLARAÃ‡ÃƒO E CONSENTIMENTOS -->
                    <TabItem Header="ðŸ“„ DeclaraÃ§Ã£o e Consentimentos" Style="{StaticResource NaturoTabItem}">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="10">
                            <StackPanel>
                                <Border Style="{StaticResource SectionCard}">
                                    <StackPanel>
                                        <TextBlock Text="DECLARAÃ‡ÃƒO DE SAÃšDE" FontWeight="Bold" 
                                                 Foreground="#3F4A3D" Margin="0,0,0,15" FontSize="16"/>
                                        
                                        <TextBlock Text="Estado de saÃºde geral declarado pelo paciente" 
                                                 Style="{StaticResource FieldLabel}" Margin="0,0,0,10"/>
                                        
                                        <CheckBox Content="Declaro estar em bom estado de saÃºde geral" Margin="0,5"/>
                                        <CheckBox Content="Declaro nÃ£o ter doenÃ§as infeciosas ativas" Margin="0,5"/>
                                        <CheckBox Content="Declaro nÃ£o estar grÃ¡vida (se aplicÃ¡vel)" Margin="0,5"/>
                                        <CheckBox Content="Declaro que as informaÃ§Ãµes fornecidas sÃ£o verdadeiras" Margin="0,5"/>
                                        
                                        <TextBlock Text="ObservaÃ§Ãµes adicionais" Style="{StaticResource FieldLabel}" Margin="0,15,0,5"/>
                                        <TextBox Style="{StaticResource FieldInput}" MinHeight="60" TextWrapping="Wrap" AcceptsReturn="True"/>
                                    </StackPanel>
                                </Border>
                                
                                <Border Style="{StaticResource SectionCard}">
                                    <StackPanel>
                                        <TextBlock Text="CONSENTIMENTOS INFORMADOS" FontWeight="Bold" 
                                                 Foreground="#3F4A3D" Margin="0,0,0,15" FontSize="16"/>
                                        
                                        <CheckBox Content="Autorizo a realizaÃ§Ã£o dos tratamentos naturais propostos" Margin="0,5"/>
                                        <CheckBox Content="Fui informado(a) sobre os possÃ­veis efeitos dos tratamentos" Margin="0,5"/>
                                        <CheckBox Content="Compreendo que a naturopatia Ã© complementar Ã  medicina convencional" Margin="0,5"/>
                                        <CheckBox Content="Autorizo o tratamento de dados pessoais para fins terapÃªuticos" Margin="0,5"/>
                                        <CheckBox Content="Aceito a polÃ­tica de privacidade e confidencialidade" Margin="0,5"/>
                                        
                                        <StackPanel Orientation="Horizontal" Margin="0,20,0,0">
                                            <TextBlock Text="Data do consentimento: " Style="{StaticResource FieldLabel}"/>
                                            <DatePicker SelectedDate="{Binding DataConsentimento}" Margin="10,0"/>
                                        </StackPanel>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </ScrollViewer>
                    </TabItem>
                    
                    <!-- SUB-TAB 2.3: REGISTO CLÃNICO -->
                    <TabItem Header="ðŸ“ Registo ClÃ­nico" Style="{StaticResource NaturoTabItem}">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="10">
                            <StackPanel>
                                <Border Style="{StaticResource SectionCard}">
                                    <StackPanel>
                                        <TextBlock Text="SESSÃ•ES DE CONSULTA" FontWeight="Bold" 
                                                 Foreground="#3F4A3D" Margin="0,0,0,15" FontSize="16"/>
                                        
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            
                                            <TextBlock Grid.Column="0" Text="PrÃ³xima Consulta" Style="{StaticResource FieldLabel}" 
                                                     VerticalAlignment="Center" Margin="0,0,10,0"/>
                                            <DatePicker Grid.Column="1" SelectedDate="{Binding PacienteAtual.ProximaConsulta}" 
                                                       Margin="0,0,10,0"/>
                                            <Button Grid.Column="2" Content="Agendar" 
                                                   Background="#9CAF97" Foreground="White" 
                                                   Padding="15,8" BorderThickness="0"/>
                                        </Grid>
                                        
                                        <TextBlock Text="Notas da sessÃ£o atual" Style="{StaticResource FieldLabel}" Margin="0,15,0,5"/>
                                        <TextBox Style="{StaticResource FieldInput}" MinHeight="100" TextWrapping="Wrap" 
                                                AcceptsReturn="True" VerticalScrollBarVisibility="Auto"/>
                                        
                                        <TextBlock Text="Plano de tratamento" Style="{StaticResource FieldLabel}" Margin="0,15,0,5"/>
                                        <TextBox Style="{StaticResource FieldInput}" MinHeight="80" TextWrapping="Wrap" 
                                                AcceptsReturn="True" VerticalScrollBarVisibility="Auto"/>
                                        
                                        <TextBlock Text="EvoluÃ§Ã£o clÃ­nica" Style="{StaticResource FieldLabel}" Margin="0,15,0,5"/>
                                        <TextBox Style="{StaticResource FieldInput}" MinHeight="80" TextWrapping="Wrap" 
                                                AcceptsReturn="True" VerticalScrollBarVisibility="Auto"/>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </ScrollViewer>
                    </TabItem>
                </TabControl>
            </TabItem>

            <!-- ======================= TAB 3: MEDICINA COMPLEMENTAR ======================= -->
            <TabItem Header="ðŸŒ¿ Medicina Complementar" Style="{StaticResource NaturoTabItem}">
                <!-- Sub-TabControl para Medicina Complementar -->
                <TabControl Background="Transparent" BorderThickness="0" Margin="10,0">
                    
                    <!-- SUB-TAB 3.1: NATUROPATIA COM TEMPLATES -->
                    <TabItem Header="ðŸŒ± Naturopatia" Style="{StaticResource NaturoTabItem}">
                        <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="10">
                            <StackPanel>
                                
                                <!-- Templates de ExercÃ­cios e Atividade FÃ­sica -->
                                <Border Style="{StaticResource SectionCard}">
                                    <StackPanel>
                                        <TextBlock Text="ðŸƒâ€â™‚ï¸ EXERCÃCIOS E ATIVIDADE FÃSICA" FontWeight="Bold" 
                                                 Foreground="#3F4A3D" Margin="0,0,0,15" FontSize="16"/>
                                        
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            
                                            <StackPanel Grid.Column="0" Margin="0,0,20,0">
                                                <TextBlock Text="Tipo de ExercÃ­cio" Style="{StaticResource FieldLabel}"/>
                                                <StackPanel>
                                                    <CheckBox Content="Caminhada (30 min/dia)" Margin="0,2"/>
                                                    <CheckBox Content="Yoga / Pilates" Margin="0,2"/>
                                                    <CheckBox Content="NataÃ§Ã£o" Margin="0,2"/>
                                                    <CheckBox Content="ExercÃ­cios cardiovasculares" Margin="0,2"/>
                                                    <CheckBox Content="Treino de forÃ§a" Margin="0,2"/>
                                                    <CheckBox Content="Tai Chi / Qi Gong" Margin="0,2"/>
                                                </StackPanel>
                                            </StackPanel>
                                            
                                            <StackPanel Grid.Column="1" Margin="20,0,0,0">
                                                <TextBlock Text="FrequÃªncia Recomendada" Style="{StaticResource FieldLabel}"/>
                                                <ComboBox Margin="0,0,0,10">
                                                    <ComboBoxItem Content="DiÃ¡rio"/>
                                                    <ComboBoxItem Content="3x por semana"/>
                                                    <ComboBoxItem Content="5x por semana"/>
                                                    <ComboBoxItem Content="Conforme tolerÃ¢ncia"/>
                                                </ComboBox>
                                                
                                                <TextBlock Text="ObservaÃ§Ãµes" Style="{StaticResource FieldLabel}"/>
                                                <TextBox Height="60" TextWrapping="Wrap" AcceptsReturn="True" />
                                            </StackPanel>
                                        </Grid>
                                    </StackPanel>
                                </Border>
                                
                                <!-- Templates de Alongamentos -->
                                <Border Style="{StaticResource SectionCard}">
                                    <StackPanel>
                                        <TextBlock Text="ðŸ¤¸â€â™€ï¸ ALONGAMENTOS E FLEXIBILIDADE" FontWeight="Bold" 
                                                 Foreground="#3F4A3D" Margin="0,0,0,15" FontSize="16"/>
                                        
                                        <StackPanel>
                                            <CheckBox Content="Alongamentos matinais (10 min)" Margin="0,2"/>
                                            <CheckBox Content="Alongamentos para pescoÃ§o e ombros" Margin="0,2"/>
                                            <CheckBox Content="Alongamentos para coluna" Margin="0,2"/>
                                            <CheckBox Content="Alongamentos para pernas" Margin="0,2"/>
                                            <CheckBox Content="Relaxamento muscular progressivo" Margin="0,2"/>
                                            
                                            <TextBlock Text="InstruÃ§Ãµes especÃ­ficas" Style="{StaticResource FieldLabel}" Margin="0,10,0,5"/>
                                            <TextBox Height="80" TextWrapping="Wrap" AcceptsReturn="True" 
                                                />
                                        </StackPanel>
                                    </StackPanel>
                                </Border>
                                
                                <!-- Templates de Dieta -->
                                <Border Style="{StaticResource SectionCard}">
                                    <StackPanel>
                                        <TextBlock Text="ðŸ¥— PLANO ALIMENTAR" FontWeight="Bold" 
                                                 Foreground="#3F4A3D" Margin="0,0,0,15" FontSize="16"/>
                                        
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            
                                            <StackPanel Grid.Column="0" Margin="0,0,20,0">
                                                <TextBlock Text="Alimentos Recomendados" Style="{StaticResource FieldLabel}"/>
                                                <StackPanel>
                                                    <CheckBox Content="Frutas e vegetais orgÃ¢nicos" Margin="0,2"/>
                                                    <CheckBox Content="Cereais integrais" Margin="0,2"/>
                                                    <CheckBox Content="ProteÃ­nas magras" Margin="0,2"/>
                                                    <CheckBox Content="Frutos secos e sementes" Margin="0,2"/>
                                                    <CheckBox Content="Peixes ricos em Ã³mega-3" Margin="0,2"/>
                                                    <CheckBox Content="Leguminosas" Margin="0,2"/>
                                                </StackPanel>
                                            </StackPanel>
                                            
                                            <StackPanel Grid.Column="1" Margin="20,0,0,0">
                                                <TextBlock Text="Alimentos a Evitar/Reduzir" Style="{StaticResource FieldLabel}"/>
                                                <StackPanel>
                                                    <CheckBox Content="AÃ§Ãºcares refinados" Margin="0,2"/>
                                                    <CheckBox Content="Alimentos processados" Margin="0,2"/>
                                                    <CheckBox Content="Gorduras trans" Margin="0,2"/>
                                                    <CheckBox Content="Ãlcool" Margin="0,2"/>
                                                    <CheckBox Content="CafeÃ­na em excesso" Margin="0,2"/>
                                                    <CheckBox Content="GlÃºten (se intolerante)" Margin="0,2"/>
                                                </StackPanel>
                                            </StackPanel>
                                        </Grid>
                                        
                                        <TextBlock Text="Plano de RefeiÃ§Ãµes Personalizado" Style="{StaticResource FieldLabel}" Margin="0,15,0,5"/>
                                        <TextBox Height="100" TextWrapping="Wrap" AcceptsReturn="True" 
                                                />
                                    </StackPanel>
                                </Border>
                                
                                <!-- Templates de MeditaÃ§Ã£o -->
                                <Border Style="{StaticResource SectionCard}">
                                    <StackPanel>
                                        <TextBlock Text="ðŸ§˜â€â™€ï¸ MEDITAÃ‡ÃƒO E MINDFULNESS" FontWeight="Bold" 
                                                 Foreground="#3F4A3D" Margin="0,0,0,15" FontSize="16"/>
                                        
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            
                                            <StackPanel Grid.Column="0" Margin="0,0,20,0">
                                                <TextBlock Text="TÃ©cnicas Recomendadas" Style="{StaticResource FieldLabel}"/>
                                                <StackPanel>
                                                    <CheckBox Content="MeditaÃ§Ã£o de respiraÃ§Ã£o (10 min/dia)" Margin="0,2"/>
                                                    <CheckBox Content="Body scan / Varredura corporal" Margin="0,2"/>
                                                    <CheckBox Content="MeditaÃ§Ã£o mindfulness" Margin="0,2"/>
                                                    <CheckBox Content="VisualizaÃ§Ã£o guiada" Margin="0,2"/>
                                                    <CheckBox Content="MeditaÃ§Ã£o caminhada" Margin="0,2"/>
                                                </StackPanel>
                                            </StackPanel>
                                            
                                            <StackPanel Grid.Column="1" Margin="20,0,0,0">
                                                <TextBlock Text="HorÃ¡rios Sugeridos" Style="{StaticResource FieldLabel}"/>
                                                <StackPanel>
                                                    <CheckBox Content="ManhÃ£ (ao acordar)" Margin="0,2"/>
                                                    <CheckBox Content="Pausa do almoÃ§o" Margin="0,2"/>
                                                    <CheckBox Content="Final do dia (antes do jantar)" Margin="0,2"/>
                                                    <CheckBox Content="Antes de dormir" Margin="0,2"/>
                                                </StackPanel>
                                                
                                                <TextBlock Text="DuraÃ§Ã£o" Style="{StaticResource FieldLabel}" Margin="0,10,0,5"/>
                                                <ComboBox>
                                                    <ComboBoxItem Content="5-10 minutos"/>
                                                    <ComboBoxItem Content="10-15 minutos"/>
                                                    <ComboBoxItem Content="20-30 minutos"/>
                                                    <ComboBoxItem Content="Conforme disponibilidade"/>
                                                </ComboBox>
                                            </StackPanel>
                                        </Grid>
                                        
                                        <TextBlock Text="InstruÃ§Ãµes personalizadas" Style="{StaticResource FieldLabel}" Margin="0,15,0,5"/>
                                        <TextBox Height="60" TextWrapping="Wrap" AcceptsReturn="True" 
                                                />
                                    </StackPanel>
                                </Border>
                                
                                <!-- Outras Terapias Complementares -->
                                <Border Style="{StaticResource SectionCard}">
                                    <StackPanel>
                                        <TextBlock Text="ðŸŒ¿ OUTRAS TERAPIAS COMPLEMENTARES" FontWeight="Bold" 
                                                 Foreground="#3F4A3D" Margin="0,0,0,15" FontSize="16"/>
                                        
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            
                                            <StackPanel Grid.Column="0" Margin="0,0,20,0">
                                                <TextBlock Text="Suplementos Naturais" Style="{StaticResource FieldLabel}"/>
                                                <StackPanel>
                                                    <CheckBox Content="Vitamina D3" Margin="0,2"/>
                                                    <CheckBox Content="Ã“mega-3" Margin="0,2"/>
                                                    <CheckBox Content="MagnÃ©sio" Margin="0,2"/>
                                                    <CheckBox Content="ProbiÃ³ticos" Margin="0,2"/>
                                                    <CheckBox Content="Complexo B" Margin="0,2"/>
                                                    <CheckBox Content="CÃºrcuma" Margin="0,2"/>
                                                </StackPanel>
                                                
                                                <TextBlock Text="Dosagem e InstruÃ§Ãµes" Style="{StaticResource FieldLabel}" Margin="0,10,0,5"/>
                                                <TextBox Height="80" TextWrapping="Wrap" AcceptsReturn="True" 
                                                        />
                                            </StackPanel>
                                            
                                            <StackPanel Grid.Column="1" Margin="20,0,0,0">
                                                <TextBlock Text="Terapias Adicionais" Style="{StaticResource FieldLabel}"/>
                                                <StackPanel>
                                                    <CheckBox Content="Aromaterapia" Margin="0,2"/>
                                                    <CheckBox Content="Fitoterapia personalizada" Margin="0,2"/>
                                                    <CheckBox Content="Acupunctura" Margin="0,2"/>
                                                    <CheckBox Content="Massagem terapÃªutica" Margin="0,2"/>
                                                    <CheckBox Content="Hidroterapia" Margin="0,2"/>
                                                    <CheckBox Content="TÃ©cnicas de respiraÃ§Ã£o" Margin="0,2"/>
                                                </StackPanel>
                                                
                                                <TextBlock Text="ObservaÃ§Ãµes" Style="{StaticResource FieldLabel}" Margin="0,10,0,5"/>
                                                <TextBox Height="80" TextWrapping="Wrap" AcceptsReturn="True" 
                                                        />
                                            </StackPanel>
                                        </Grid>
                                    </StackPanel>
                                </Border>
                                
                            </StackPanel>
                        </ScrollViewer>
                    </TabItem>
                                        <!-- Queixa Principal -->
                                        <TextBlock Text="Queixa Principal" Style="{StaticResource FieldLabel}"/>
                                        <ComboBox Margin="0,0,0,10" IsEditable="True"
                                                 Text="{Binding PacienteAtual.QueixaPrincipal, UpdateSourceTrigger=PropertyChanged}">
                                            <ComboBoxItem Content="Dores de cabeÃ§a"/>
                                            <ComboBoxItem Content="Dores nas costas"/>
                                            <ComboBoxItem Content="Ansiedade e stress"/>
                                            <ComboBoxItem Content="Problemas digestivos"/>
                                            <ComboBoxItem Content="InsÃ³nia"/>
                                            <ComboBoxItem Content="Fadiga crÃ³nica"/>
                                            <ComboBoxItem Content="Dores articulares"/>
                                            <ComboBoxItem Content="Problemas hormonais"/>
                                            <ComboBoxItem Content="Outro (especificar)"/>
                                        </ComboBox>
                                        
                                        <!-- HistÃ³ria da DoenÃ§a Atual -->
                                        <TextBlock Text="HistÃ³ria da DoenÃ§a Atual" Style="{StaticResource FieldLabel}"/>
                                        <TextBox Text="{Binding PacienteAtual.HistoriaDoencaAtual, UpdateSourceTrigger=PropertyChanged}" 
                                                 Style="{StaticResource FieldInput}" MinHeight="60" TextWrapping="Wrap" 
                                                 AcceptsReturn="True" VerticalScrollBarVisibility="Auto"/>
                                        
                                        <!-- Sintomas Associados -->
                                        <TextBlock Text="Sintomas Associados" Style="{StaticResource FieldLabel}" Margin="0,10,0,5"/>
                                        <StackPanel>
                                            <CheckBox Content="NÃ¡useas" Margin="0,2"/>
                                            <CheckBox Content="Tonturas" Margin="0,2"/>
                                            <CheckBox Content="AlteraÃ§Ãµes do sono" Margin="0,2"/>
                                            <CheckBox Content="AlteraÃ§Ãµes do apetite" Margin="0,2"/>
                                            <CheckBox Content="Irritabilidade" Margin="0,2"/>
                                            <CheckBox Content="Outros sintomas:" Margin="0,2"/>
                                            <TextBox Text="{Binding PacienteAtual.Sintomas, UpdateSourceTrigger=PropertyChanged}"
                                                   Style="{StaticResource FieldInput}" Margin="20,2,0,10"/>
                                        </StackPanel>
                                    </StackPanel>
                                    
                                    <StackPanel Grid.Column="1">
                                        <!-- Intensidade da Dor -->
                                        <TextBlock Text="Intensidade da Dor (0-10)" Style="{StaticResource FieldLabel}"/>
                                        <Slider Minimum="0" Maximum="10" TickFrequency="1" TickPlacement="BottomRight" 
                                               IsSnapToTickEnabled="True" Margin="0,0,0,10"/>
                                        
                                        <!-- FrequÃªncia dos Sintomas -->
                                        <TextBlock Text="FrequÃªncia dos Sintomas" Style="{StaticResource FieldLabel}"/>
                                        <ComboBox Margin="0,0,0,10">
                                            <ComboBoxItem Content="Constante"/>
                                            <ComboBoxItem Content="DiÃ¡ria"/>
                                            <ComboBoxItem Content="Semanal"/>
                                            <ComboBoxItem Content="Mensal"/>
                                            <ComboBoxItem Content="Ocasional"/>
                                        </ComboBox>
                                        
                                        <!-- Medicamentos Atuais -->
                                        <TextBlock Text="Medicamentos Atuais" Style="{StaticResource FieldLabel}"/>
                                        <StackPanel>
                                            <CheckBox Content="NÃ£o toma medicamentos" Margin="0,2"/>
                                            <CheckBox Content="AnalgÃ©sicos (ex: paracetamol)" Margin="0,2"/>
                                            <CheckBox Content="Anti-inflamatÃ³rios (ex: ibuprofeno)" Margin="0,2"/>
                                            <CheckBox Content="Medicamentos para ansiedade" Margin="0,2"/>
                                            <CheckBox Content="Medicamentos para o sono" Margin="0,2"/>
                                            <CheckBox Content="Suplementos vitamÃ­nicos" Margin="0,2"/>
                                            <CheckBox Content="Outros medicamentos:" Margin="0,2"/>
                                            <TextBox Text="{Binding PacienteAtual.MedicamentosAtuais, UpdateSourceTrigger=PropertyChanged}"
                                                   Style="{StaticResource FieldInput}" Margin="20,2,0,0"/>
                                        </StackPanel>
                                    </StackPanel>
                                </Grid>
                            </StackPanel>
                        </Border>
                        
                        <!-- Estilo de Vida -->
                        <Border Style="{StaticResource SectionCard}">
                            <StackPanel>
                                <TextBlock Text="ESTILO DE VIDA" FontWeight="Bold" 
                                         Foreground="#3F4A3D" Margin="0,0,0,15" FontSize="16"/>
                                         
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <StackPanel Grid.Column="0" Margin="0,0,20,0">
                                        <!-- HÃ¡bitos Alimentares -->
                                        <TextBlock Text="Tipo de AlimentaÃ§Ã£o" Style="{StaticResource FieldLabel}"/>
                                        <ComboBox Margin="0,0,0,10">
                                            <ComboBoxItem Content="OmnÃ­vora (come tudo)"/>
                                            <ComboBoxItem Content="Vegetariana"/>
                                            <ComboBoxItem Content="Vegana"/>
                                            <ComboBoxItem Content="MediterrÃ¢nica"/>
                                            <ComboBoxItem Content="Low carb"/>
                                            <ComboBoxItem Content="Sem glÃºten"/>
                                            <ComboBoxItem Content="Sem lactose"/>
                                            <ComboBoxItem Content="Outra (especificar)"/>
                                        </ComboBox>
                                        
                                        <TextBlock Text="NÃºmero de RefeiÃ§Ãµes por Dia" Style="{StaticResource FieldLabel}"/>
                                        <ComboBox Margin="0,0,0,10">
                                            <ComboBoxItem Content="2 refeiÃ§Ãµes"/>
                                            <ComboBoxItem Content="3 refeiÃ§Ãµes"/>
                                            <ComboBoxItem Content="4-5 refeiÃ§Ãµes"/>
                                            <ComboBoxItem Content="6+ refeiÃ§Ãµes"/>
                                            <ComboBoxItem Content="Irregular"/>
                                        </ComboBox>
                                        
                                        <TextBlock Text="IngestÃ£o de Ãgua (litros/dia)" Style="{StaticResource FieldLabel}"/>
                                        <ComboBox Margin="0,0,0,10">
                                            <ComboBoxItem Content="Menos de 1L"/>
                                            <ComboBoxItem Content="1-1.5L"/>
                                            <ComboBoxItem Content="1.5-2L"/>
                                            <ComboBoxItem Content="Mais de 2L"/>
                                        </ComboBox>
                                        
                                        <!-- ExercÃ­cio FÃ­sico -->
                                        <TextBlock Text="Atividade FÃ­sica" Style="{StaticResource FieldLabel}" Margin="0,10,0,5"/>
                                        <StackPanel>
                                            <CheckBox Content="SedentÃ¡rio" Margin="0,2"/>
                                            <CheckBox Content="Caminhadas regulares" Margin="0,2"/>
                                            <CheckBox Content="GinÃ¡sio 1-2x/semana" Margin="0,2"/>
                                            <CheckBox Content="GinÃ¡sio 3+x/semana" Margin="0,2"/>
                                            <CheckBox Content="Desporto regular" Margin="0,2"/>
                                            <CheckBox Content="Yoga/Pilates" Margin="0,2"/>
                                            <CheckBox Content="Outras atividades:" Margin="0,2"/>
                                            <TextBox Text="{Binding PacienteAtual.ExercicioFisico, UpdateSourceTrigger=PropertyChanged}"
                                                   Style="{StaticResource FieldInput}" Margin="20,2,0,0"/>
                                        </StackPanel>
                                    </StackPanel>
                                    
                                    <StackPanel Grid.Column="1">
                                        <!-- PadrÃ£o de Sono -->
                                        <TextBlock Text="Qualidade do Sono" Style="{StaticResource FieldLabel}"/>
                                        <ComboBox Margin="0,0,0,10">
                                            <ComboBoxItem Content="Muito boa - durmo bem"/>
                                            <ComboBoxItem Content="Boa - ocasionalmente acordo"/>
                                            <ComboBoxItem Content="RazoÃ¡vel - acordo vÃ¡rias vezes"/>
                                            <ComboBoxItem Content="MÃ¡ - insÃ³nia frequente"/>
                                            <ComboBoxItem Content="Muito mÃ¡ - raramente durmo bem"/>
                                        </ComboBox>
                                        
                                        <TextBlock Text="Horas de Sono por Noite" Style="{StaticResource FieldLabel}"/>
                                        <ComboBox Margin="0,0,0,10">
                                            <ComboBoxItem Content="Menos de 5 horas"/>
                                            <ComboBoxItem Content="5-6 horas"/>
                                            <ComboBoxItem Content="6-7 horas"/>
                                            <ComboBoxItem Content="7-8 horas"/>
                                            <ComboBoxItem Content="Mais de 8 horas"/>
                                        </ComboBox>
                                        
                                        <!-- NÃ­vel de Stress -->
                                        <TextBlock Text="NÃ­vel de Stress (0-10)" Style="{StaticResource FieldLabel}"/>
                                        <Slider Minimum="0" Maximum="10" TickFrequency="1" TickPlacement="BottomRight" 
                                               IsSnapToTickEnabled="True" Margin="0,0,0,10"/>
                                        
                                        <TextBlock Text="Principais Fontes de Stress" Style="{StaticResource FieldLabel}" Margin="0,10,0,5"/>
                                        <StackPanel>
                                            <CheckBox Content="Trabalho" Margin="0,2"/>
                                            <CheckBox Content="FamÃ­lia" Margin="0,2"/>
                                            <CheckBox Content="Relacionamentos" Margin="0,2"/>
                                            <CheckBox Content="FinanÃ§as" Margin="0,2"/>
                                            <CheckBox Content="SaÃºde" Margin="0,2"/>
                                            <CheckBox Content="Estudos" Margin="0,2"/>
                                            <CheckBox Content="Outras fontes:" Margin="0,2"/>
                                            <TextBox Text="{Binding PacienteAtual.Stress, UpdateSourceTrigger=PropertyChanged}"
                                                   Style="{StaticResource FieldInput}" Margin="20,2,0,0"/>
                                        </StackPanel>
                                    </StackPanel>
                                </Grid>
                            </StackPanel>
                        </Border>
                        
                        <!-- Tratamento e EvoluÃ§Ã£o -->
                        <Border Style="{StaticResource SectionCard}">
                            <StackPanel>
                                <TextBlock Text="TRATAMENTO E EVOLUÃ‡ÃƒO" FontWeight="Bold" 
                                         Foreground="#3F4A3D" Margin="0,0,0,15" FontSize="16"/>
                                         
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <StackPanel Grid.Column="0" Margin="0,0,20,0">
                                        <TextBlock Text="Plano de Tratamento" Style="{StaticResource FieldLabel}"/>
                                        <TextBox Text="{Binding PacienteAtual.PlanoTratamento, UpdateSourceTrigger=PropertyChanged}" 
                                                 Style="{StaticResource FieldInput}" MinHeight="80" TextWrapping="Wrap" 
                                                 AcceptsReturn="True" VerticalScrollBarVisibility="Auto"/>
                                                 
                                        <TextBlock Text="ObservaÃ§Ãµes Gerais" Style="{StaticResource FieldLabel}"/>
                                        <TextBox Text="{Binding PacienteAtual.ObservacoesGerais, UpdateSourceTrigger=PropertyChanged}" 
                                                 Style="{StaticResource FieldInput}" MinHeight="80" TextWrapping="Wrap" 
                                                 AcceptsReturn="True" VerticalScrollBarVisibility="Auto"/>
                                    </StackPanel>
                                    
                                    <StackPanel Grid.Column="1">
                                        <TextBlock Text="EvoluÃ§Ã£o do Quadro" Style="{StaticResource FieldLabel}"/>
                                        <TextBox Text="{Binding PacienteAtual.EvolucaoQuadro, UpdateSourceTrigger=PropertyChanged}" 
                                                 Style="{StaticResource FieldInput}" MinHeight="80" TextWrapping="Wrap" 
                                                 AcceptsReturn="True" VerticalScrollBarVisibility="Auto"/>
                                                 
                                        <TextBlock Text="PrÃ³xima Consulta" Style="{StaticResource FieldLabel}"/>
                                        <DatePicker SelectedDate="{Binding PacienteAtual.ProximaConsulta}" 
                                                    Margin="0,0,0,15"/>
                                    </StackPanel>
                                </Grid>
                            </StackPanel>
                        </Border>
                        
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
            
            <!-- SUB-TAB 3.2: IRISDIAGNÃ“STICO -->
            <TabItem Header="ðŸ‘ï¸ IrisdiagnÃ³stico" Style="{StaticResource NaturoTabItem}">
                <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="10">
                    <StackPanel>
                        <Border Style="{StaticResource SectionCard}">
                            <StackPanel>
                                <TextBlock Text="ANÃLISE DA ÃRIS" FontWeight="Bold" 
                                         Foreground="#3F4A3D" Margin="0,0,0,15" FontSize="16"/>
                                
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <StackPanel Grid.Column="0" Margin="0,0,20,0">
                                        <TextBlock Text="Ãris direita" Style="{StaticResource FieldLabel}"/>
                                        <TextBox Style="{StaticResource FieldInput}" MinHeight="100" TextWrapping="Wrap" AcceptsReturn="True"/>
                                        
                                        <TextBlock Text="ConstituiÃ§Ã£o observada" Style="{StaticResource FieldLabel}" Margin="0,15,0,5"/>
                                        <ComboBox>
                                            <ComboBoxItem Content="LinfÃ¡tica (azul clara)"/>
                                            <ComboBoxItem Content="HematogÃ©nica (marrom)"/>
                                            <ComboBoxItem Content="Mista (variaÃ§Ãµes)"/>
                                        </ComboBox>
                                    </StackPanel>
                                    
                                    <StackPanel Grid.Column="1">
                                        <TextBlock Text="Ãris esquerda" Style="{StaticResource FieldLabel}"/>
                                        <TextBox Style="{StaticResource FieldInput}" MinHeight="100" TextWrapping="Wrap" AcceptsReturn="True"/>
                                        
                                        <TextBlock Text="Sinais especÃ­ficos" Style="{StaticResource FieldLabel}" Margin="0,15,0,5"/>
                                        <StackPanel>
                                            <CheckBox Content="Lacunas" Margin="0,2"/>
                                            <CheckBox Content="Manchas pigmentares" Margin="0,2"/>
                                            <CheckBox Content="AnÃ©is nervosos" Margin="0,2"/>
                                            <CheckBox Content="Radiais solaris" Margin="0,2"/>
                                        </StackPanel>
                                    </StackPanel>
                                </Grid>
                                
                                <TextBlock Text="InterpretaÃ§Ã£o constitucional" Style="{StaticResource FieldLabel}" Margin="0,20,0,5"/>
                                <TextBox Style="{StaticResource FieldInput}" MinHeight="80" TextWrapping="Wrap" AcceptsReturn="True"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
            
            <!-- SUB-TAB 3.3: TERAPIA BIOENERGÃ‰TICA -->
            <TabItem Header="âš›ï¸ Terapia BioenergÃ©tica" Style="{StaticResource NaturoTabItem}">
                <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="10">
                    <StackPanel>
                        <!-- AvaliaÃ§Ã£o EnergÃ©tica -->
                        <Border Style="{StaticResource SectionCard}">
                            <StackPanel>
                                <TextBlock Text="AVALIAÃ‡ÃƒO ENERGÃ‰TICA" FontWeight="Bold" 
                                         Foreground="#3F4A3D" Margin="0,0,0,15" FontSize="16"/>
                                
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <StackPanel Grid.Column="0" Margin="0,0,20,0">
                                        <TextBlock Text="Campo energÃ©tico" Style="{StaticResource FieldLabel}"/>
                                        <ComboBox Margin="0,0,0,15">
                                            <ComboBoxItem Content="Forte e equilibrado"/>
                                            <ComboBoxItem Content="Moderadamente estÃ¡vel"/>
                                            <ComboBoxItem Content="Fraco mas presente"/>
                                            <ComboBoxItem Content="InstÃ¡vel com oscilaÃ§Ãµes"/>
                                            <ComboBoxItem Content="Muito desequilibrado"/>
                                        </ComboBox>
                                        
                                        <TextBlock Text="Chakras principais" Style="{StaticResource FieldLabel}" Margin="0,0,0,5"/>
                                        <StackPanel>
                                            <CheckBox Content="ðŸ”´ Raiz (Muladhara)" Margin="0,2"/>
                                            <CheckBox Content="ðŸŸ  Sacral (Svadhisthana)" Margin="0,2"/>
                                            <CheckBox Content="ðŸŸ¡ Plexo Solar (Manipura)" Margin="0,2"/>
                                            <CheckBox Content="ðŸŸ¢ CoraÃ§Ã£o (Anahata)" Margin="0,2"/>
                                            <CheckBox Content="ðŸ”µ Garganta (Vishuddha)" Margin="0,2"/>
                                            <CheckBox Content="ðŸŸ£ Terceiro Olho (Ajna)" Margin="0,2"/>
                                            <CheckBox Content="ðŸŸ¢ CoronÃ¡rio (Sahasrara)" Margin="0,2"/>
                                        </StackPanel>
                                    </StackPanel>
                                    
                                    <StackPanel Grid.Column="1">
                                        <TextBlock Text="FrequÃªncias observadas" Style="{StaticResource FieldLabel}"/>
                                        <TextBox Style="{StaticResource FieldInput}" MinHeight="80" TextWrapping="Wrap" AcceptsReturn="True"/>
                                        
                                        <TextBlock Text="PadrÃµes bioenergÃ©ticos" Style="{StaticResource FieldLabel}" Margin="0,15,0,5"/>
                                        <ComboBox>
                                            <ComboBoxItem Content="HarmÃ³nico e fluido"/>
                                            <ComboBoxItem Content="Bloqueios pontuais"/>
                                            <ComboBoxItem Content="Desalinhamento geral"/>
                                            <ComboBoxItem Content="Hiperatividade energÃ©tica"/>
                                            <ComboBoxItem Content="DÃ©fice energÃ©tico"/>
                                        </ComboBox>
                                    </StackPanel>
                                </Grid>
                                
                                <TextBox Text="{Binding PacienteAtual.Chakras, UpdateSourceTrigger=PropertyChanged}"
                                       Style="{StaticResource FieldInput}" Margin="0,15,0,0" MinHeight="60" TextWrapping="Wrap" AcceptsReturn="True"/>
                            </StackPanel>
                        </Border>

                        <!-- Protocolo QuÃ¢ntico -->
                        <Border Style="{StaticResource SectionCard}">
                            <StackPanel>
                                <TextBlock Text="PROTOCOLO DE TERAPIA QUÃ‚NTICA" FontWeight="Bold" 
                                         Foreground="#3F4A3D" Margin="0,0,0,15" FontSize="16"/>
                                
                                <TextBlock Text="FrequÃªncias terapÃªuticas aplicadas" Style="{StaticResource FieldLabel}" Margin="0,0,0,5"/>
                                <StackPanel>
                                    <CheckBox Content="528 Hz (FrequÃªncia do Amor)" Margin="0,2"/>
                                    <CheckBox Content="432 Hz (Harmonia Universal)" Margin="0,2"/>
                                    <CheckBox Content="963 Hz (FrequÃªncia de Deus)" Margin="0,2"/>
                                    <CheckBox Content="741 Hz (Limpeza e ExpressÃ£o)" Margin="0,2"/>
                                    <CheckBox Content="396 Hz (LibertaÃ§Ã£o do Medo)" Margin="0,2"/>
                                </StackPanel>
                                
                                <TextBlock Text="Modalidades aplicadas" Style="{StaticResource FieldLabel}" Margin="0,15,0,5"/>
                                <StackPanel>
                                    <CheckBox Content="Bioeletrografia Kirlian" Margin="0,2"/>
                                    <CheckBox Content="Radiestesia energÃ©tica" Margin="0,2"/>
                                    <CheckBox Content="Cristais programados" Margin="0,2"/>
                                    <CheckBox Content="Geometria sagrada" Margin="0,2"/>
                                    <CheckBox Content="Campos morfogenÃ©ticos" Margin="0,2"/>
                                </StackPanel>
                                
                                <TextBlock Text="Plano de reequilÃ­brio energÃ©tico" Style="{StaticResource FieldLabel}" Margin="0,15,0,5"/>
                                <TextBox Style="{StaticResource FieldInput}" MinHeight="80" TextWrapping="Wrap" AcceptsReturn="True"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

                </TabControl>
            </TabItem>

        <!-- Footer com BotÃµes -->
        <Border Grid.Row="2" Background="Transparent" Padding="20">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <Button Content="Cancelar" Command="{Binding CancelarCommand}" 
                        Background="Transparent" Foreground="#5A6558" BorderBrush="#E3E9DE"
                        Padding="20,10" Margin="0,0,10,0"/>
                <Button Content="Guardar" Command="{Binding SalvarCommand}" 
                        Background="#9CAF97" Foreground="White" BorderBrush="#9CAF97"
                        Padding="20,10"/>
            </StackPanel>
        </Border>

        <!-- Loading overlay -->
        <Border Grid.RowSpan="3" Background="#80FFFFFF" 
                Visibility="{Binding IsLoading, Converter={StaticResource BoolToVisibilityConverter}}">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                <ProgressBar IsIndeterminate="True" Width="200" Height="8" 
                           Foreground="#9CAF97" Background="#E3E9DE"/>
                <TextBlock Text="A processar..." 
                         FontSize="14" Foreground="#5A6558" 
                         HorizontalAlignment="Center" 
                         Margin="0,10,0,0"/>
            </StackPanel>
        </Border>

    </Grid>
</UserControl>