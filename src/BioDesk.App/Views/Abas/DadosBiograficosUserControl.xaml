<UserControl x:Class="BioDesk.App.Views.Abas.DadosBiograficosUserControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d"
             d:DesignHeight="600" d:DesignWidth="800">

    <!-- UserControl.Resources removidos para usar apenas estilos globais do App.xaml -->

    <Grid Margin="30">
        <StackPanel>
            <!-- Identificação Pessoal -->
            <Border Background="White" BorderBrush="#E3E9DE" BorderThickness="1" CornerRadius="12" Padding="25" Margin="0,0,0,20">
                <StackPanel>
                    <TextBlock Text="👤 Identificação Pessoal" FontSize="18" FontWeight="SemiBold"
                             Foreground="#3F4A3D" Margin="0,0,0,20"/>

                    <!-- LINHA 1: Nome Completo | Nome Preferencial -->
                    <UniformGrid Rows="1" Columns="2" Margin="0,0,0,15">
                        <!-- Nome Completo -->
                        <StackPanel Margin="0,0,15,0">
                            <TextBlock Text="Nome Completo *" Style="{StaticResource FieldLabelStyle}"/>
                            <TextBox Text="{Binding PacienteAtual.NomeCompleto, UpdateSourceTrigger=PropertyChanged}"
                                   Style="{StaticResource FieldTextBoxStyle}"/>
                        </StackPanel>

                        <!-- Nome Preferencial -->
                        <StackPanel Margin="15,0,0,0">
                            <TextBlock Text="Nome Preferencial" Style="{StaticResource FieldLabelStyle}"/>
                            <TextBox Text="{Binding PacienteAtual.NomePreferencial, UpdateSourceTrigger=PropertyChanged}"
                                   Style="{StaticResource FieldTextBoxStyle}"/>
                        </StackPanel>
                    </UniformGrid>

                    <!-- LINHA 2: Data Nascimento (Idade) | Género | Profissão -->
                    <UniformGrid Rows="1" Columns="3" Margin="0,0,0,15">
                        <!-- Data de Nascimento -->
                        <StackPanel Margin="0,0,15,0">
                            <TextBlock Text="Data de Nascimento *" Style="{StaticResource FieldLabelStyle}"/>
                            <DatePicker SelectedDate="{Binding PacienteAtual.DataNascimento, UpdateSourceTrigger=PropertyChanged}"
                                      Style="{StaticResource FieldDatePickerStyle}"/>
                            <TextBlock Text="{Binding IdadePaciente, FallbackValue='-- anos'}"
                                     FontSize="10" Foreground="#5A6558" Margin="0,2,0,0"/>
                        </StackPanel>

                        <!-- Género -->
                        <StackPanel Margin="15,0,15,0">
                            <TextBlock Text="Género" Style="{StaticResource FieldLabelStyle}"/>
                            <ComboBox SelectedItem="{Binding PacienteAtual.Genero, UpdateSourceTrigger=PropertyChanged}"
                                    Style="{StaticResource FieldComboBoxStyle}">
                                <ComboBoxItem Content="Masculino"/>
                                <ComboBoxItem Content="Feminino"/>
                                <ComboBoxItem Content="Outro"/>
                            </ComboBox>
                        </StackPanel>

                        <!-- Profissão -->
                        <StackPanel Margin="15,0,0,0">
                            <TextBlock Text="Profissão" Style="{StaticResource FieldLabelStyle}"/>
                            <TextBox Text="{Binding PacienteAtual.Profissao, UpdateSourceTrigger=PropertyChanged}"
                                   Style="{StaticResource FieldTextBoxStyle}"/>
                        </StackPanel>
                    </UniformGrid>

                    <!-- LINHA 3: NIF | Como teve conhecimento | Especifique -->
                    <UniformGrid Rows="1" Columns="3" Margin="0,0,0,20">
                        <!-- NIF -->
                        <StackPanel Margin="0,0,15,0">
                            <TextBlock Text="NIF" Style="{StaticResource FieldLabelStyle}"/>
                            <TextBox Text="{Binding PacienteAtual.NIF, UpdateSourceTrigger=PropertyChanged}"
                                   Style="{StaticResource FieldTextBoxStyle}"/>
                        </StackPanel>

                        <!-- Como teve conhecimento -->
                        <StackPanel Margin="15,0,15,0">
                            <TextBlock Text="Como teve conhecimento" Style="{StaticResource FieldLabelStyle}"/>
                            <ComboBox x:Name="ProvenienciaComboBox"
                                    SelectedItem="{Binding PacienteAtual.Proveniencia, UpdateSourceTrigger=PropertyChanged}"
                                    Style="{StaticResource FieldComboBoxStyle}">
                                <ComboBoxItem Content="Recomendação médica"/>
                                <ComboBoxItem Content="Amigo/Familiar"/>
                                <ComboBoxItem Content="Internet/Site"/>
                                <ComboBoxItem Content="Redes Sociais"/>
                                <ComboBoxItem Content="Publicidade"/>
                                <ComboBoxItem Content="Outro"/>
                            </ComboBox>
                        </StackPanel>

                        <!-- Especifique (campo condicional) -->
                        <StackPanel Margin="15,0,0,0"
                                  Visibility="{Binding ElementName=ProvenienciaComboBox, Path=SelectedItem.Content, Converter={StaticResource StringParameterToVisibilityConverter}, ConverterParameter='Outro'}">
                            <TextBlock Text="Especifique" Style="{StaticResource FieldLabelStyle}"/>
                            <TextBox x:Name="OutroProvenienciaTextBox"
                                   Text="{Binding PacienteAtual.ProvenienciaOutro, UpdateSourceTrigger=PropertyChanged}"
                                   Style="{StaticResource FieldTextBoxStyle}"
                                   Tag="Como nos conheceu..."/>
                        </StackPanel>
                    </UniformGrid>
                </StackPanel>
            </Border>

            <!-- Contactos -->
            <Border Background="White" BorderBrush="#E3E9DE" BorderThickness="1" CornerRadius="12" Padding="25">
                <StackPanel>
                    <TextBlock Text="📞 Contactos" FontSize="18" FontWeight="SemiBold"
                             Foreground="#3F4A3D" Margin="0,0,0,20"/>

                    <UniformGrid Rows="2" Columns="3" Margin="0,0,0,20">
                        <!-- LINHA 1: Telefone | Telefone Alternativo | Email -->

                        <!-- Telefone -->
                        <StackPanel Margin="0,0,15,15">
                            <TextBlock Text="Telefone" Style="{StaticResource FieldLabelStyle}"/>
                            <TextBox Text="{Binding ContactoAtual.TelefonePrincipal, UpdateSourceTrigger=PropertyChanged}"
                                   Style="{StaticResource FieldTextBoxStyle}"/>
                        </StackPanel>

                        <!-- Telefone Alternativo -->
                        <StackPanel Margin="15,0,15,15">
                            <TextBlock Text="Telefone Alternativo" Style="{StaticResource FieldLabelStyle}"/>
                            <TextBox Text="{Binding ContactoAtual.TelefoneAlternativo, UpdateSourceTrigger=PropertyChanged}"
                                   Style="{StaticResource FieldTextBoxStyle}"/>
                        </StackPanel>

                        <!-- Email -->
                        <StackPanel Margin="15,0,0,15">
                            <TextBlock Text="Email" Style="{StaticResource FieldLabelStyle}"/>
                            <TextBox Text="{Binding ContactoAtual.EmailPrincipal, UpdateSourceTrigger=PropertyChanged}"
                                   Style="{StaticResource FieldTextBoxStyle}"/>
                        </StackPanel>

                        <!-- LINHA 2: Morada | Código Postal | Localidade -->

                        <!-- Morada -->
                        <StackPanel Margin="0,0,15,0">
                            <TextBlock Text="Morada" Style="{StaticResource FieldLabelStyle}"/>
                            <TextBox Text="{Binding ContactoAtual.RuaAvenida, UpdateSourceTrigger=PropertyChanged}"
                                   Style="{StaticResource FieldTextBoxStyle}"/>
                        </StackPanel>

                        <!-- Código Postal -->
                        <StackPanel Margin="15,0,15,0">
                            <TextBlock Text="Código Postal" Style="{StaticResource FieldLabelStyle}"/>
                            <TextBox Text="{Binding ContactoAtual.CodigoPostal, UpdateSourceTrigger=PropertyChanged}"
                                   Style="{StaticResource FieldTextBoxStyle}"/>
                        </StackPanel>

                        <!-- Localidade -->
                        <StackPanel Margin="15,0,0,0">
                            <TextBlock Text="Localidade" Style="{StaticResource FieldLabelStyle}"/>
                            <TextBox Text="{Binding ContactoAtual.Localidade, UpdateSourceTrigger=PropertyChanged}"
                                   Style="{StaticResource FieldTextBoxStyle}"/>
                        </StackPanel>
                    </UniformGrid>
                </StackPanel>
            </Border>

            <!-- Informação sobre campos obrigatórios -->
            <Border Background="#F7F9F6" BorderBrush="#E3E9DE" BorderThickness="1" CornerRadius="8" Padding="15" Margin="0,20,0,0">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="ℹ️" FontSize="16" Margin="0,0,8,0"/>
                    <TextBlock Text="Apenas Nome Completo e Data de Nascimento são obrigatórios" FontSize="12"
                             Foreground="#5A6558" VerticalAlignment="Center"/>
                </StackPanel>
            </Border>
        </StackPanel>
    </Grid>
</UserControl>